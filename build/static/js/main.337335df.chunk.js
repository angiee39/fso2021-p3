(this["webpackJsonpthe-phonebook"]=this["webpackJsonpthe-phonebook"]||[]).push([[0],{37:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),r=t(3),i=t(2),u=t(4),o=t.n(u),s="/api/persons",d=function(){return o.a.get(s)},l=function(e){return o.a.post(s,e)},j=function(e){return o.a.delete("".concat(s,"/").concat(e))},h=function(e,n){return o.a.put("".concat(s,"/").concat(e),n)},b=(t(37),t(0)),m=function(e){var n=e.searchName,t=e.handleSearchName;return Object(b.jsxs)("div",{children:["filter name ",Object(b.jsx)("input",{value:n,onChange:t})]})},f=function(e){var n=e.newName,t=e.newNumber,c=e.handleNameChange,a=e.handleNumberChange,r=e.addName;return Object(b.jsxs)("form",{onSubmit:r,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:n,onChange:c})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:t,onChange:a})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.persons,t=e.searchName,c=e.deleteName,a=""===t?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(b.jsx)("div",{children:a.map((function(e){return Object(b.jsxs)("div",{children:[e.name," ",e.number," ",Object(b.jsx)("button",{onClick:function(){return c(e.id)},children:"delete"})]},e.name)}))})},O=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(i.useState)(""),u=Object(r.a)(a,2),o=u[0],s=u[1],O=Object(i.useState)(""),v=Object(r.a)(O,2),x=v[0],y=v[1],N=Object(i.useState)(""),w=Object(r.a)(N,2),g=w[0],C=w[1],S=Object(i.useState)({type:"",display:null}),k=Object(r.a)(S,2),T=k[0],E=k[1];Object(i.useEffect)((function(){d().then((function(e){c(e.data)}))}),[]);var J=function(e){h(e,{name:o,number:x,id:o}).then((function(n){var a=t.filter((function(n){return n.id!==e})).concat(n.data);c(a)})).catch((function(e){E({type:"error",display:"".concat(o," has already been removed")}),setTimeout((function(){E({type:"",display:null})}),4e3)}))},L=function(e){var n=e.message;return null===n.display?null:"error"===n.type?Object(b.jsx)("div",{className:"error",children:n.display}):Object(b.jsx)("div",{className:"success",children:n.display})};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(L,{message:T}),Object(b.jsx)(m,{searchName:g,handleSearchName:function(e){return C(e.target.value)}}),Object(b.jsx)("h2",{children:"add a new"}),Object(b.jsx)(f,{newName:o,newNumber:x,handleNameChange:function(e){return s(e.target.value)},handleNumberChange:function(e){return y(e.target.value)},addName:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).find((function(e){return e===o}))===o){if(!window.confirm("".concat(o," id already added to the phonebook, replace the old number with the new one?")))return;var n=t.find((function(e){return e.name===o})).id;J(n),E({type:"success",display:"".concat(o," edited")}),setTimeout((function(){E({type:"",display:null})}),4e3)}else{l({name:o,number:x,id:o}).then((function(e){c(t.concat(e.data)),s(""),y(""),E({type:"success",display:"".concat(o," added")}),setTimeout((function(){E({type:"",display:null})}),4e3)}))}}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(p,{persons:t,searchName:g,deleteName:function(e){window.confirm("delete ".concat(t.find((function(n){return n.id===e})).name,"?"))&&j(e).then((function(){c(t.filter((function(n){return n.id!==e})))}))}})]})};a.a.render(Object(b.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.337335df.chunk.js.map